# å®Ÿè£…ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆï¼ˆGitHub Issueå½¢å¼ï¼‰

## ğŸ“ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¬ã‚¤ãƒ‰

- **å„ªå…ˆåº¦**: P0ï¼ˆå¿…é ˆï¼‰ã€P1ï¼ˆé‡è¦ï¼‰ã€P2ï¼ˆæ¨å¥¨ï¼‰ã€P3ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **ãƒ©ãƒ™ãƒ«**: `backend`, `frontend`, `infra`, `docs`, `testing`
- **è¦‹ç©ã‚‚ã‚Š**: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆ1=1æ™‚é–“ã€8=1æ—¥ï¼‰

## ğŸ”´ P0: å¿…é ˆã‚¿ã‚¹ã‚¯ï¼ˆWeek 1ï¼‰

### #001 [backend] Small Wins Serviceå®Ÿè£…
**å„ªå…ˆåº¦**: P0 | **è¦‹ç©ã‚‚ã‚Š**: 8 | **æ‹…å½“**: Backend

#### æ¦‚è¦
é‹å‹•ãƒ‡ãƒ¼ã‚¿ã‚’WHOåŸºæº–ã®å¥åº·æŒ‡æ¨™ã«å¤‰æ›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè£…

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `/backend/services/SmallWinsService.js` ä½œæˆ
- [ ] `calculateDaily(userId, date)` ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] é€±150åˆ†é”æˆç‡ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- [ ] é€£ç¶šæ—¥æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
- [ ] å‰é€±æ¯”è¼ƒã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šï¼‰

#### å®Ÿè£…è©³ç´°
```javascript
// ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
- calculateWeeklyMinutes()    // é€±æ¬¡é‹å‹•æ™‚é–“é›†è¨ˆ
- calculateStreak()            // é€£ç¶šæ—¥æ•°è¨ˆç®—
- calculateScore()             // å¥åº·ã‚¹ã‚³ã‚¢ç®—å‡º
- getHealthBenefit()           // å¥åº·å¯„ä¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
```

#### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- `backend/config/smallwins.json` - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `backend/models/Workout.js` - æ—¢å­˜ãƒ¢ãƒ‡ãƒ«

---

### #002 [backend] Insights APIå®Ÿè£…
**å„ªå…ˆåº¦**: P0 | **è¦‹ç©ã‚‚ã‚Š**: 4 | **æ‹…å½“**: Backend

#### æ¦‚è¦
å¥åº·æŒ‡æ¨™ã‚’æä¾›ã™ã‚‹RESTful APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `GET /api/insights/daily/:userId` å®Ÿè£…
- [ ] `GET /api/insights/weekly/:userId` å®Ÿè£…
- [ ] Redisã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ï¼ˆTTL: 1æ™‚é–“ï¼‰
- [ ] èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢é©ç”¨
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] Swaggerä»•æ§˜æ›¸ä½œæˆ

#### APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
```json
{
  "type": "daily",
  "score": 85,
  "rationale": {
    "weeklyMinutes": 157,
    "targetMinutes": 150,
    "streakDays": 7,
    "weekOverWeekChange": 12,
    "healthBenefit": "WHOæ¨å¥¨é”æˆï¼šå¿ƒç–¾æ‚£ãƒªã‚¹ã‚¯30%æ¸›"
  }
}
```

---

### #003 [frontend] SmallWinCardå®Ÿè£…
**å„ªå…ˆåº¦**: P0 | **è¦‹ç©ã‚‚ã‚Š**: 5 | **æ‹…å½“**: Frontend

#### æ¦‚è¦
å¥åº·ã‚¹ã‚³ã‚¢ã¨æ ¹æ‹ ã‚’è¡¨ç¤ºã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `/frontend/src/components/SmallWinCard.tsx` ä½œæˆ
- [ ] Material-UI Cardä½¿ç”¨
- [ ] æ ¹æ‹ ãƒ”ãƒ«ï¼ˆChipï¼‰è¡¨ç¤º
- [ ] ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- [ ] Storybookã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä½œæˆ
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ

#### Propså®šç¾©
```typescript
interface SmallWinCardProps {
  type: 'daily' | 'weekly' | 'achievement';
  score: number;
  rationale: RationaleData;
}
```

---

### #004 [backend] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
**å„ªå…ˆåº¦**: P0 | **è¦‹ç©ã‚‚ã‚Š**: 2 | **æ‹…å½“**: Backend

#### æ¦‚è¦
insights, consents, audit_logsãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] insightsãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
- [ ] consentsãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
- [ ] audit_logsãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
- [ ] ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ

#### SQL
```sql
CREATE TABLE insights (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  date DATE NOT NULL,
  type VARCHAR(50),
  score INTEGER,
  rationale_json JSONB,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸŸ¡ P1: é‡è¦ã‚¿ã‚¹ã‚¯ï¼ˆWeek 2ï¼‰

### #005 [backend] Consentç®¡ç†API
**å„ªå…ˆåº¦**: P1 | **è¦‹ç©ã‚‚ã‚Š**: 4 | **æ‹…å½“**: Backend

#### æ¦‚è¦
ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨åŒæ„ã‚’ç®¡ç†ã™ã‚‹CRUD API

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `POST /api/consents` - åŒæ„ç™»éŒ²
- [ ] `GET /api/consents/:userId` - åŒæ„çŠ¶æ…‹å–å¾—
- [ ] `PUT /api/consents/:id` - åŒæ„æ›´æ–°
- [ ] `DELETE /api/consents/:id` - åŒæ„æ’¤å›
- [ ] ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²
- [ ] GDPRæº–æ‹ ã®å®Ÿè£…

---

### #006 [frontend] ConsentCenterãƒšãƒ¼ã‚¸
**å„ªå…ˆåº¦**: P1 | **è¦‹ç©ã‚‚ã‚Š**: 6 | **æ‹…å½“**: Frontend

#### æ¦‚è¦
ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®šã¨åŒæ„ç®¡ç†ã®UIãƒšãƒ¼ã‚¸

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `/frontend/src/pages/Settings/ConsentCenter.tsx` ä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿æºä¸€è¦§è¡¨ç¤º
- [ ] åŒæ„ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒ
- [ ] å‰Šé™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- [ ] Stravaé€£æºè§£é™¤ãƒœã‚¿ãƒ³
- [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³é…ç½®
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

---

### #007 [backend] PDF/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
**å„ªå…ˆåº¦**: P1 | **è¦‹ç©ã‚‚ã‚Š**: 6 | **æ‹…å½“**: Backend

#### æ¦‚è¦
å¥åº·ãƒ‡ãƒ¼ã‚¿ã®åŒ»ç™‚å‘ã‘ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] PDFãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆï¼ˆpuppeteer/jsPDFï¼‰
- [ ] CSVãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼å®Ÿè£…
- [ ] `GET /api/export/pdf/:userId`
- [ ] `GET /api/export/csv/:userId`
- [ ] æ—¥ä»˜ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- [ ] åŒ»ç™‚å‘ã‘ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- [ ] ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†

#### PDFãƒ¬ãƒãƒ¼ãƒˆå†…å®¹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºæœ¬æƒ…å ±
- æœŸé–“åˆ¥çµ±è¨ˆ
- å¥åº·ã‚¹ã‚³ã‚¢æ¨ç§»ã‚°ãƒ©ãƒ•
- ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆå±¥æ­´
- åŒ»ç™‚æ©Ÿé–¢å‘ã‘æ³¨è¨˜

---

### #008 [frontend] ExportButton ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
**å„ªå…ˆåº¦**: P1 | **è¦‹ç©ã‚‚ã‚Š**: 3 | **æ‹…å½“**: Frontend

#### æ¦‚è¦
PDF/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†
- [ ] ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥

## ğŸ”µ P2: æ¨å¥¨ã‚¿ã‚¹ã‚¯ï¼ˆWeek 3ï¼‰

### #009 [backend] Strava Webhookå®Ÿè£…
**å„ªå…ˆåº¦**: P2 | **è¦‹ç©ã‚‚ã‚Š**: 6 | **æ‹…å½“**: Backend

#### æ¦‚è¦
Stravaã‹ã‚‰ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] `GET /api/strava/webhook` - æ¤œè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- [ ] `POST /api/strava/webhook` - ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡
- [ ] ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†
- [ ] å†ªç­‰æ€§ä¿è¨¼
- [ ] ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°å®Ÿè£…
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

---

### #010 [infra] Rediså°å…¥
**å„ªå…ˆåº¦**: P2 | **è¦‹ç©ã‚‚ã‚Š**: 3 | **æ‹…å½“**: Infrastructure

#### æ¦‚è¦
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼ã®ãŸã‚ã®Redisè¨­å®š

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] docker-compose.ymlã«Redisè¿½åŠ 
- [ ] æ¥ç¶šè¨­å®šä½œæˆ
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ˜ãƒ«ãƒ‘ãƒ¼å®Ÿè£…
- [ ] Bullã‚­ãƒ¥ãƒ¼è¨­å®š
- [ ] ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨­å®š

---

### #011 [testing] E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
**å„ªå…ˆåº¦**: P2 | **è¦‹ç©ã‚‚ã‚Š**: 8 | **æ‹…å½“**: QA

#### æ¦‚è¦
ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] Playwright/Cypressè¨­å®š
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆè¨˜éŒ²ãƒ†ã‚¹ãƒˆ
- [ ] Small Winsè¡¨ç¤ºãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ
- [ ] CI/CDçµ±åˆ

#### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
1. æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
2. Stravaé€£æº
3. ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆè¨˜éŒ²
4. Small Winsç¢ºèª
5. PDFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
6. ãƒ‡ãƒ¼ã‚¿å‰Šé™¤

## ğŸŸ¢ P3: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ï¼ˆWeek 4+ï¼‰

### #012 [frontend] ç¡çœ ãƒ‡ãƒ¼ã‚¿çµ±åˆ
**å„ªå…ˆåº¦**: P3 | **è¦‹ç©ã‚‚ã‚Š**: 8 | **æ‹…å½“**: Full Stack

#### æ¦‚è¦
HealthKit/Health Connectã‹ã‚‰ã®ç¡çœ ãƒ‡ãƒ¼ã‚¿å–å¾—

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ APIé€£æº
- [ ] ç¡çœ ãƒ¢ãƒ‡ãƒ«è¿½åŠ 
- [ ] UIçµ±åˆ
- [ ] ç›¸é–¢åˆ†æè¡¨ç¤º

---

### #013 [frontend] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
**å„ªå…ˆåº¦**: P3 | **è¦‹ç©ã‚‚ã‚Š**: 4 | **æ‹…å½“**: Frontend

#### æ¦‚è¦
ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«å¿œã˜ãŸãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] ãƒ†ãƒ¼ãƒãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å®Ÿè£…
- [ ] ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆå®šç¾©
- [ ] åˆ‡ã‚Šæ›¿ãˆãƒˆã‚°ãƒ«
- [ ] LocalStorageä¿å­˜

---

### #014 [backend] é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
**å„ªå…ˆåº¦**: P3 | **è¦‹ç©ã‚‚ã‚Š**: 6 | **æ‹…å½“**: Backend

#### æ¦‚è¦
ç›®æ¨™é”æˆé€šçŸ¥ã‚„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½

#### å—ã‘å…¥ã‚ŒåŸºæº–
- [ ] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆPWAï¼‰
- [ ] é€šçŸ¥è¨­å®šç®¡ç†
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

## ğŸ“‹ ã‚¿ã‚¹ã‚¯ä¾å­˜é–¢ä¿‚

```mermaid
graph TD
    A[#001 SmallWinsService] --> B[#002 Insights API]
    B --> C[#003 SmallWinCard]
    D[#004 DB Migration] --> A

    E[#005 Consent API] --> F[#006 ConsentCenter]
    D --> E

    G[#007 Exportæ©Ÿèƒ½] --> H[#008 ExportButton]
    A --> G

    I[#010 Redis] --> J[#009 Webhook]
    I --> B

    K[#011 E2Eãƒ†ã‚¹ãƒˆ] --> L[å…¨æ©Ÿèƒ½å®Œæˆ]
```

## ğŸ¯ é€±æ¬¡ã‚¹ãƒ—ãƒªãƒ³ãƒˆè¨ˆç”»

### Sprint 1 (Week 1)
- #001 SmallWinsService [8h]
- #002 Insights API [4h]
- #003 SmallWinCard [5h]
- #004 DB Migration [2h]
**åˆè¨ˆ**: 19h

### Sprint 2 (Week 2)
- #005 Consent API [4h]
- #006 ConsentCenter [6h]
- #007 Exportæ©Ÿèƒ½ [6h]
- #008 ExportButton [3h]
**åˆè¨ˆ**: 19h

### Sprint 3 (Week 3)
- #009 Webhook [6h]
- #010 Redis [3h]
- #011 E2Eãƒ†ã‚¹ãƒˆ [8h]
**åˆè¨ˆ**: 17h

## ğŸ“Š é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

| ã‚¿ã‚¹ã‚¯ | çŠ¶æ…‹ | é€²æ— | æ‹…å½“ | é–‹å§‹æ—¥ | å®Œäº†æ—¥ |
|-------|------|------|------|--------|--------|
| #001 | Todo | 0% | - | - | - |
| #002 | Todo | 0% | - | - | - |
| #003 | Todo | 0% | - | - | - |
| #004 | Todo | 0% | - | - | - |

## ğŸš€ å®Ÿè£…é–‹å§‹ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
git checkout -b feature/health-decision-support
npm install

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
cd backend
npm install bull redis dayjs
npx sequelize-cli migration:generate --name add-health-tables

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd ../frontend
npm install jspdf html2canvas

# Docker
docker-compose up -d
```

---

**ä½œæˆæ—¥**: 2025å¹´9æœˆ26æ—¥
**ä½œæˆè€…**: FitStart Tech Lead